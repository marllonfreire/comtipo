<div class="contact-form-container">
  <form id="contactForm" onsubmit="handleFormSubmit(event)">
    <div class="form-group">
      <label for="name">Nome</label>
      <input type="text" id="name" name="name" required placeholder="Seu nome completo">
    </div>
    
    <div class="form-group">
      <label for="email">E-mail</label>
      <input type="email" id="email" name="email" required placeholder="seu@email.com">
    </div>
    
    <div class="form-group">
      <label for="message">Mensagem</label>
      <textarea id="message" name="message" rows="5" required placeholder="Como podemos ajudar?"></textarea>
    </div>
    
    <button type="submit" class="submit-btn">Enviar Mensagem</button>
    <p id="formStatus" style="margin-top: 10px; font-weight: bold;"></p>
  </form>
</div>

<style>
  .contact-form-container { 
    max-width: 600px; 
    margin: 0 auto; 
  }
  
  .form-group { 
    margin-bottom: 15px; 
  }
  
  .form-group label { 
    display: block; 
    margin-bottom: 5px; 
    font-weight: bold; 
  }
  
  .form-group input, .form-group textarea { 
    width: 100%; 
    padding: 10px; 
    border: 1px solid var(--border); /* Usa a borda do tema para combinar */
    background: var(--entry);        /* Fundo do input combina com o tema */
    color: var(--primary);           /* Texto do input usa a cor primária */
    border-radius: 4px; 
    font-family: inherit;
  }

  .submit-btn {
    background-color: var(--primary);
    color: var(--theme); /* CORREÇÃO: Garante contraste no Dark/Light mode */
    font-weight: bold;
    padding: 12px 24px;
    border: none; 
    border-radius: 4px; 
    cursor: pointer; 
    font-size: 1rem;
    transition: opacity 0.3s;
    width: 100%; /* Botão largura total em mobile */
  }

  .submit-btn:hover { 
    opacity: 0.9; 
  }
  
  .submit-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
</style>

<script>
  async function handleFormSubmit(event) {
    event.preventDefault();
    const status = document.getElementById('formStatus');
    const btn = document.querySelector('.submit-btn');
    const formData = new FormData(event.target);
    const data = Object.fromEntries(formData.entries());

    btn.disabled = true;
    btn.textContent = "Enviando...";
    status.textContent = "";

    try {
      // Envia para a função na Cloudflare (/functions/api/send.js)
      const response = await fetch('/api/send', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      if (response.ok) {
        status.textContent = "✅ Mensagem enviada com sucesso!";
        status.style.color = "var(--primary)"; // Usa a cor do tema
        event.target.reset();
      } else {
        throw new Error('Erro no envio');
      }
    } catch (error) {
      status.textContent = "❌ Erro ao enviar. Tente novamente.";
      status.style.color = "red";
    } finally {
      btn.disabled = false;
      btn.textContent = "Enviar Mensagem";
    }
  }
</script>